using System.Text;

namespace Talaqi.Infrastructure.Rag.Common
{
    public static class PromptBuilder
    {
        public static string BuildRagSystemPrompt(string question, IEnumerable<string> snippets)
        {
            var sb = new StringBuilder();

            sb.AppendLine("""
??? ????? ??? ???? ????? ?????.
????? ???????:
- ??? ?????? ??????? ???.
- ?????? ??? ????????? ???????? ?? ?????????.
- ????? ??????? ?? ????? ??????.
- ??? ??? ??????? ???? ??? ??????? ??? [1] ?? [2].
- ??? ?? ???? ?????? ??????? ??? ??????:
"?? ???? ?????? ????? ?? ?????? ??????? ??? ??? ??????."
""");

            sb.AppendLine();
            sb.AppendLine("????????? ???????:");

            int i = 1;
            foreach (var s in snippets)
            {
                sb.AppendLine($"[{i}] {s}");
                i++;
            }

            sb.AppendLine();
            sb.AppendLine("??????:");
            sb.AppendLine(question);

            return sb.ToString();
        }
    }
}
